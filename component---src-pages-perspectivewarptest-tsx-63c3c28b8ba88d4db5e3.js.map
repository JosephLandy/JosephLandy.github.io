{"version":3,"sources":["webpack:///./src/pages/perspectivewarptest.tsx","webpack:///./src/images/cardsOnGrid.png"],"names":["imgURL","fileURL","srcPoints","x","y","targetPoints","PerspectiveWarp","props","url","setUrl","useState","image","setImage","useEffect","img","Image","async","Promise","resolve","reject","onload","e","src","console","error","load","srcStyle","fill","r","font","fontFill","targStyle","css","lighten","colors","darkgrey","type","accept","onChange","files","target","length","URL","createObjectURL","points","clickHandler","style","onClick","targPoints","module","exports"],"mappings":"4FAAA,oHAaA,MAAMA,EAASC,IAITC,EAAY,CAChB,CACEC,EAAG,UACHC,EAAG,aAEL,CACED,EAAG,WACHC,EAAG,UAEL,CACED,EAAG,aACHC,EAAG,cAEL,CACED,EAAG,aACHC,EAAG,cAGDC,EAAe,CACnB,CACEF,EAAG,aACHC,EAAG,cAEL,CACED,EAAG,aACHC,EAAG,cAEL,CACED,EAAG,aACHC,EAAG,WAEL,CACED,EAAG,aACHC,EAAG,YAiGQE,UA3F0BC,IAEvC,MAAM,EAACC,EAAD,EAAMC,GAAUC,mBAASV,IACzB,EAACW,EAAD,EAAQC,GAAYF,qBAE1BG,oBAAU,KACR,IAAIC,EAAM,IAAIC,MAed,MAdaC,WACX,UACQ,IAAIC,QAAQ,CAACC,EAASC,KAC1BL,EAAIM,OAASC,IACXH,EAAQ,OAEVJ,EAAIQ,IAAMd,IAEZI,EAASE,GACT,MACAS,QAAQC,MAAM,6CAGlBC,GACO,KAELX,EAAIM,OAAS,OAEd,CAACZ,IAEJ,MAUMkB,EAAW,CAAEC,KAAM,UAAWC,EAAG,GAAIC,KAAM,aAAcC,SAAU,QACnEC,EAAY,IAAKL,EAAUC,KAAM,WAEvC,OACE,YAAC,IAAD,KACE,mBACEK,IAAKA,YAAF,2CAGqBC,YAAQ,MAAOC,IAAOC,UAH3C,oBAQH,qCAEE,qBAAOC,KAAK,SAEd,wCACA,0DAEE,qBAAOA,KAAK,OAAOC,OAAO,UAAUC,SA3BoBjB,IAC9D,IAAIkB,EAAQlB,EAAEmB,OAAOD,MACjBA,GAASA,EAAME,OAAS,GAC1BhC,EAAOiC,IAAIC,gBAAgBJ,EAAM,SA0B/B,YAAC,IAAD,CACEK,OAAQ1C,EACR2C,aAnC4DxB,MAoC5DV,MAAOA,EACPmC,MAAOpB,IAEa,IAArBxB,EAAUuC,QACT,YAAC,IAAD,CACEG,OAAQvC,EACRwC,aAxC6DxB,MAyC7DV,MAAOA,EACPmC,MAAOf,IAGc,IAAxB1B,EAAaoC,QACZ,sBACEM,QAAS,QADX,mBAQuB,IAAxB1C,EAAaoC,QAAgB9B,GAC5B,YAAC,IAAD,CAAcT,UAAWA,EAAW8C,WAAY3C,EAAcM,MAAOA,EAAOmC,MAAOf,Q,qBC5I7FkB,EAAOC,QAAU,IAA0B","file":"component---src-pages-perspectivewarptest-tsx-63c3c28b8ba88d4db5e3.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PageLayout from '../layouts/page-layout';\r\n\r\nimport CanvasPoints from '../components/CanvasPoints';\r\n\r\n// import fileURL from '../images/church.jpeg';\r\nimport fileURL from '../images/cardsOnGrid.png';\r\n\r\nimport { css } from '@emotion/core';\r\nimport { lighten } from 'polished';\r\nimport { colors } from '../styles/colors';\r\nimport CanvasWarped from '../components/CanvasWarped';\r\n\r\nconst imgURL = fileURL;\r\n\r\ninterface Props {}\r\n\r\nconst srcPoints = [\r\n  {\r\n    x: 544.46875,\r\n    y: 387.1953125,\r\n  },\r\n  {\r\n    x: 419.109375,\r\n    y: 493.8125,\r\n  },\r\n  {\r\n    x: 424.69921875,\r\n    y: 641.41015625,\r\n  },\r\n  {\r\n    x: 557.05078125,\r\n    y: 602.1328125,\r\n  },\r\n];\r\nconst targetPoints = [\r\n  {\r\n    x: 357.76953125,\r\n    y: 380.62890625,\r\n  },\r\n  {\r\n    x: 600.11328125,\r\n    y: 380.62890625,\r\n  },\r\n  {\r\n    x: 600.11328125,\r\n    y: 547.90625,\r\n  },\r\n  {\r\n    x: 357.76953125,\r\n    y: 547.90625,\r\n  },\r\n];\r\n\r\n\r\n// test the perspective warp with points already hardcoded. \r\nconst PerspectiveWarp: React.FC<Props> = props => {\r\n\r\n  const [url, setUrl] = useState(imgURL);\r\n  const [image, setImage] = useState<HTMLImageElement>();\r\n\r\n  useEffect(() => {\r\n    let img = new Image();\r\n    const load = async () => {\r\n      try {\r\n        await new Promise((resolve, reject) => {\r\n          img.onload = e => {\r\n            resolve(null);\r\n          };\r\n          img.src = url;\r\n        });\r\n        setImage(img);\r\n      } catch {\r\n        console.error('something went wrong drawing the image.');\r\n      }\r\n    };\r\n    load();\r\n    return () => {\r\n      // I think I can clean up state like this.\r\n      img.onload = null;\r\n    };\r\n  }, [url]);\r\n\r\n  const srcPointHandler: React.MouseEventHandler<HTMLCanvasElement> = e => {};\r\n\r\n  const targetPointHandler: React.MouseEventHandler<HTMLCanvasElement> = e => {};\r\n\r\n  const handleFiles: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    let files = e.target.files;\r\n    if (files && files.length > 0) {\r\n      setUrl(URL.createObjectURL(files[0]));\r\n    }\r\n  };\r\n  const srcStyle = { fill: '#fcba03', r: 12, font: '30px serif', fontFill: '#000' };\r\n  const targStyle = { ...srcStyle, fill: '#be2de2' };\r\n\r\n  return (\r\n    <PageLayout>\r\n      <div\r\n        css={css`\r\n          button {\r\n            margin-top: 10px;\r\n            background-color: ${lighten('0.2', colors.darkgrey)};\r\n            outline: none;\r\n          }\r\n        `}\r\n      >\r\n        <label>\r\n          Image url\r\n          <input type=\"url\" />\r\n        </label>\r\n        <button>load image</button>\r\n        <label>\r\n          Click here to upload an image.\r\n          <input type=\"file\" accept=\"image/*\" onChange={handleFiles} />\r\n        </label>\r\n        <CanvasPoints\r\n          points={srcPoints}\r\n          clickHandler={srcPointHandler}\r\n          image={image}\r\n          style={srcStyle}\r\n        />\r\n        {srcPoints.length === 4 && (\r\n          <CanvasPoints\r\n            points={targetPoints}\r\n            clickHandler={targetPointHandler}\r\n            image={image}\r\n            style={targStyle}\r\n          />\r\n        )}\r\n        {targetPoints.length === 4 && (\r\n          <button\r\n            onClick={() => {\r\n              // setShowWarped(true);\r\n            }}\r\n          >\r\n            Generate warped\r\n          </button>\r\n        )}\r\n        {targetPoints.length === 4 && image && (\r\n          <CanvasWarped srcPoints={srcPoints} targPoints={targetPoints} image={image} style={targStyle} />\r\n        )}\r\n      </div>\r\n    </PageLayout>\r\n  );\r\n};\r\n\r\nexport default PerspectiveWarp;\r\n","module.exports = __webpack_public_path__ + \"static/cardsOnGrid-0cd1e9e8a5c714a986fee239e5488623.png\";"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{EZyI:function(e,t,n){"use strict";n.r(t);var a=n("KQm4"),c=n("q1tI"),i=n.n(c),o=n("qKvR"),r=n("ufqH"),l=n("LuW/"),s=n("W/yf"),d=n("fdqv"),u=n("8BKa"),g=n("w2tK"),f=n("U4x/");const p=n.n(f).a;var b={name:"1mb7ed4",styles:"padding:40px;"};t.default=e=>{const{0:t,1:n}=Object(c.useState)([]),{0:f,1:h}=Object(c.useState)([]),{0:w,1:j}=Object(c.useState)(!1),{0:m,1:O}=Object(c.useState)(p),{0:y,1:x}=Object(c.useState)();Object(c.useEffect)(()=>{let e=new Image;return(async()=>{try{await new Promise((t,n)=>{e.onload=e=>{t(null)},e.src=m}),n([]),h([]),x(e)}catch{console.error("something went wrong drawing the image.")}})(),()=>{e.onload=null,n([]),h([]),x(void 0)}},[m]);const v={fill:"#fcba03",r:6,font:"30px serif",fontFill:"#000"},k={...v,fill:"#be2de2"};return Object(o.d)(s.a,null,Object(o.d)("div",{css:Object(o.c)("margin-top:20px;button{margin-top:10px;background-color:",Object(r.b)("0.2",l.a.darkgrey),";outline:none;}p{margin:20px;}")},Object(o.d)("label",{css:b},"Click here to upload an image.",Object(o.d)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files;t&&t.length>0&&O(URL.createObjectURL(t[0]))}})),Object(o.d)("p",null,"Click to select 4 points identifying a feature to display without perspective, in clockwise direction from top left corner. The feature should be a flat surface, viewed in the image at an angle and/or rotated. For example, one of the window bays in the image of the buidling, or the face of one of the columns. Or whatever you want, try it and see what happens!"),Object(o.d)(u.a,{points:t,clickHandler:e=>{const t=Object(d.a)(e.currentTarget,e);j(!1),0!=f.length&&h([]),n(e=>e.length>=4?[]:[].concat(Object(a.a)(e),[t]))},image:y,style:v}),4===t.length&&Object(o.d)(i.a.Fragment,null,Object(o.d)("p",null,"Now select 4 coresponding points defining a rectangle that the selected feature will be mapped to/occupy in the output image. A rectangle of approximately the same size as the feature will result in less distortion."),Object(o.d)(u.a,{points:f,clickHandler:e=>{const t=Object(d.a)(e.currentTarget,e);j(!1),h(e=>{switch(e.length){case 0:return[t];case 1:return[].concat(Object(a.a)(e),[{x:t.x,y:e[0].y}]);case 2:return[].concat(Object(a.a)(e),[{x:e[1].x,y:t.y},{x:e[0].x,y:t.y}]);case 4:default:return[]}})},image:y,style:k})),4===f.length&&Object(o.d)(i.a.Fragment,null,Object(o.d)("p",null,"Click to compute and display the warped image. (May take a few seconds, especially with large images)"),Object(o.d)("button",{onClick:()=>{j(!0)}},"Generate")),4===f.length&&y&&w&&Object(o.d)(g.a,{srcPoints:t,targPoints:f,image:y,style:k})))}},"U4x/":function(e,t,n){e.exports=n.p+"static/church-4acc3d322218ea01bc7f9f4b86c064f5.jpeg"},fdqv:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var a=n("q1tI");function c(){const{0:e,1:t}=Object(a.useState)({width:void 0,height:void 0});return Object(a.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}function i(e,t){let n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}}}]);
//# sourceMappingURL=component---src-pages-perspectivewarp-tsx-d19d47976529f3ec4bc7.js.map